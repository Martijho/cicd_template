name: Long Tests
on:
  workflow_dispatch:

jobs:
  long-tests:
    runs-on: ubuntu-latest
    steps:
      - name: Run long tests
        run: echo "Running long tests..."
  
      - name: Update PR Check to Passed
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const { owner, repo } = context.repo;
            const pr = (await github.rest.pulls.list({
              owner,
              repo,
              head: context.ref
            })).data[0];

            if (!pr) return;

            await github.rest.checks.create({
              owner,
              repo,
              name: "Long Tests",
              head_sha: pr.head.sha,
              conclusion: "success",
              output: {
                title: "Long Tests Passed",
                summary: "All long tests have passed! âœ…"
              }
            });